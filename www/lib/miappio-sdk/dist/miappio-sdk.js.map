{"version":3,"file":"miappio-sdk.js","sources":["ts/src/miappio-sdk.ts","ts/src/index.ts","ts/src/sdk/miapp.module.ts","ts/src/sdk/angular.service.ts","ts/src/sdk/internal.service.ts","ts/src/session/session.ts","ts/src/connection/connection.ts","ts/src/connection/client.ts","ts/src/connection/ajax.ts","ts/src/connection/xhrpromise.ts","ts/src/tools/xor.ts","ts/src/tools/storage.ts","ts/src/tools/base64.ts","ts/src/version/index.ts"],"sourcesContent":["/**\n * Generated bundle index. Do not edit.\n */\n\nexport {MiappModule,MiappService,LoggerService} from './index';\n","// export * from './tools'\n\nexport {MiappModule,MiappService,LoggerService} from './sdk/index.angular';\n","import {ModuleWithProviders, NgModule} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MiappService} from './angular.service';\n/**\n * `NgModule` which provides associated services.\n * \n * ...\n * \n * \\@stable\n */\nexport class MiappModule {\nconstructor() {\n    }\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n    imports: [\n        CommonModule\n    ],\n    declarations: [],\n\n    exports: [],\n\n    providers: [MiappService]\n}, ] },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction MiappModule_tsickle_Closure_declarations() {\n/** @type {?} */\nMiappModule.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMiappModule.ctorParameters;\n}\n\n\n\n/**\n * todo doc on module\n * module MiappModule\n *\n * exemple\n *      // ... after install :\n *      // $ npm install miappio-sdk\n *      // then init your app.js & use it in your services\n *\n * <script src=\"https://gist.github.com/mlefree/ad64f7f6a345856f6bf45fd59ca8db46.js\"></script>\n *\n * <script src=\"https://gist.github.com/mlefree/ad64f7f6a345856f6bf45fd59ca8db46.js\"></script>\n */\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","import {Injectable} from '@angular/core';\nimport {LoggerInterface, ModuleServiceInterface, ModuleServiceInitOptionsInterface, ModuleServiceLoginOptionsInterface} from './interfaces';\nimport {InternalService} from './internal.service';\n/**\n * Angular2+ MiappService\n * \\@class MiappService\n * @see ModuleServiceInterface\n * \n */\nexport class MiappService implements ModuleServiceInterface {\nprivate logger: LoggerInterface;\nprivate miappService: any = null;\nprivate promise: any = null;\nconstructor() {\n        this.logger = new LoggerService();\n        this.promise = Promise;\n        this.miappService = null;\n        // let pouchdbRequired = PouchDB;\n        // pouchdbRequired.error();\n    };\n/**\n * @param {?} miappId\n * @param {?=} options\n * @return {?}\n */\npublic init(miappId, options?: ModuleServiceInitOptionsInterface): Promise<boolean> {\n        if (!this.miappService) {\n            this.miappService = new InternalService(this.logger, this.promise);\n        }\n        /*\n        if (options && options.forcedEndpoint) {\n            this.miappService.setAuthEndpoint(options.forcedEndpoint);\n        }\n        if (options && options.forcedDBEndpoint) {\n            this.miappService.setDBEndpoint(options.forcedDBEndpoint);\n        }*/\n        return this.miappService.miappInit(miappId, options);\n    };\n/**\n * @param {?} login\n * @param {?} password\n * @return {?}\n */\npublic login(login, password): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.login : not initialized.');\n        }\n        return this.miappService.miappLogin(login, password);\n    };\n/**\n * @param {?=} options\n * @return {?}\n */\npublic loginAsDemo(options?: ModuleServiceLoginOptionsInterface): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.loginAsDemo : not initialized.');\n        }\n        return this.miappService.miappLoginInDemoMode(options);\n    };\n/**\n * @return {?}\n */\npublic isLoggedIn(): boolean {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.isLoggedIn : not initialized.');\n        }\n        return this.miappService.miappIsLogin();\n    };\n/**\n * @return {?}\n */\npublic getRoles(): Array<string> {\n        if (!this.miappService) {\n            return [];\n        }\n        return this.miappService.miappRoles();\n    };\n/**\n * @return {?}\n */\npublic getEndpoints(): Array<string> {\n        if (!this.miappService) {\n            return [];\n        }\n        return this.miappService.getEndpoints();\n    };\n/**\n * @return {?}\n */\npublic logout(): Promise<void> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.logout : not initialized.');\n        }\n        return this.miappService.miappLogout();\n    };\n/**\n * \n * Synchronize DB\n * \\@memberof miapp.angularService\n * \n * \\@example \n *  let initDb = function() {\n *     this.miappService.put('my first row');\n *  };\n *  this.miappService.sync(initDb)\n *  .then(user => ...)\n *  .catch(err => ...)\n * \n * @param {?=} fnInitFirstData  a function with db as input and that return promise: call if DB is empty\n * @return {?}\n */\npublic sync(fnInitFirstData?): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.sync : not initialized.');\n        }\n        return this.miappService.miappSync(fnInitFirstData, this);\n    };\n/**\n * Store data in your session\n * \n * @param {?} data\n * @return {?}\n */\npublic put(data: any): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.put : not initialized.');\n        }\n        return this.miappService.miappPutInDb(data);\n    };\n/**\n * Find object Id and remove it from your session\n * \n * @param {?} id\n * @return {?}\n */\npublic remove(id: string): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.remove : not initialized.');\n        }\n        return this.miappService.miappRemoveInDb(id);\n    };\n/**\n * Find\n * @param {?} id\n * @return {?}\n */\npublic find(id: string): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.find : not initialized.');\n        }\n        return this.miappService.miappFindInDb(id);\n    };\n/**\n * @return {?}\n */\npublic findAll(): Promise<any> {\n        if (!this.miappService) {\n            return this.promise.reject('miapp.sdk.angular2.findAll : not initialized.');\n        }\n        return this.miappService.miappFindAllInDb();\n    };\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/**\n * @nocollapse\n */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\n\nfunction MiappService_tsickle_Closure_declarations() {\n/** @type {?} */\nMiappService.decorators;\n/**\n * @nocollapse\n * @type {?}\n */\nMiappService.ctorParameters;\n/** @type {?} */\nMiappService.prototype.logger;\n/** @type {?} */\nMiappService.prototype.miappService;\n/** @type {?} */\nMiappService.prototype.promise;\n}\n\nexport class LoggerService implements LoggerInterface {\n/**\n * @param {?} message\n * @return {?}\n */\nlog(message: string) {\n        // console.log(message);\n    }\n/**\n * @param {?} message\n * @return {?}\n */\nerror(message: string) {\n        console.error(message);\n    }\n/**\n * @param {?} message\n * @return {?}\n */\nwarn(message: string) {\n        console.warn(message);\n    }\n}\n\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n","// import PouchDB from 'pouchdb';\n// import * as PouchDB from 'pouchdb/dist/pouchdb.js';\n// import PouchDB from 'pouchdb/dist/pouchdb.js';\n\nimport * as version from '../version';\nimport * as tools from '../tools';\nimport * as connection from '../connection';\nimport * as session from '../session';\nimport {LoggerInterface, ModuleServiceInitOptionsInterface, ModuleServiceLoginOptionsInterface, SdkInterface} from './interfaces';\nimport {SessionCryptoInterface} from '../session/session';\n/**\n * usefull only for miapp.io dev team\n */\nexport class InternalService {\nprivate sdk: SdkInterface;\nprivate logger: LoggerInterface;\nprivate promise: PromiseConstructor;\nprivate storage: tools.LocalStorage;\nprivate session: session.Session;\nprivate connection: connection.Connection;\n/**\n * @param {?} logger\n * @param {?} promise\n */\nconstructor(logger: LoggerInterface, promise: PromiseConstructor) {\n\n        this.sdk = {\n            org: 'miapp.io',\n            version: version.version,\n            prod: false\n        };\n        this.logger = {\n            log: () => {\n            }, error: () => {\n            }, warn: () => {\n            }\n        };\n        if (logger) {\n            this.logger = logger;\n        }\n        this.logger.log('miapp.sdk.service : constructor');\n        if (promise) {\n            this.promise = promise;\n        }\n        this.storage = new tools.LocalStorage(window.localStorage, 'miapp.');\n        this.session = new session.Session();\n        this.connection = new connection.Connection(this.sdk, this.storage);\n    }\n/**\n * Init connection & session\n * Check uri\n * Done each app start\n * \n * @param {?} miappId\n * @param {?=} options Optional settings\n * @return {?}\n */\npublic miappInit(miappId: string, options?: ModuleServiceInitOptionsInterface) {\n\n        const /** @type {?} */ self = this;\n        self.logger.log('miapp.sdk.service.miappInit : ', options);\n        if (!miappId) {\n            self.logger.error('miapp.sdk.service.miappInit : bad init');\n            return self.promise.reject('miapp.sdk.service.miappInit : bad init');\n        }\n\n        self.sdk.prod = options ? !!options.prod : true;\n\n        return new self.promise((resolve, reject) => {\n            self.connection.verifyConnectionStates()\n                .then(() => {\n                    self.connection.miappId = miappId;\n                    self.connection.miappVersion = self.sdk.version;\n                    self.connection.miappCrypto = options ? !!options.crypto : false;\n                    const /** @type {?} */ url = self.connection.getEndpoints({filter: 'theBestOne'})[0];\n                    if (!url && self.sdk.prod) {\n                        self.logger.warn('miapp.sdk.service.miappInit : no endpoint is nowly available, switch to dev mode.');\n                        reject('miapp.sdk.service.miappInit: endpoint connection required');\n                    } else {\n                        self.connection.setClient(new connection.Client(self.connection.miappId, url, self.storage, self.sdk));\n                        resolve();\n                    }\n                })\n                .catch((err) => {\n                    self.logger.error('miapp.sdk.service.miappInit : ', err);\n                    reject('miapp.sdk.service.miappInit: ' + err.toString());\n                });\n        });\n    };\n/**\n * Call it if miappIsLogin() === false\n * Erase all (db & storage)\n * \n * @param {?} login\n * @param {?} password\n * @return {?}\n */\npublic miappLogin(login: string, password: string): Promise<any> {\n        const /** @type {?} */ self = this;\n        self.logger.log('miapp.sdk.service.miappLogin');\n        if (!self.connection.isReady()) {\n            return self.promise.reject('miapp.sdk.service.miappLogin : Did you miapp.sdk.service.miappInit() ?');\n        }\n\n        return new self.promise((resolve, reject) => {\n            self._removeAll()\n                .then(() => {\n                    return self.connection.verifyConnectionStates();\n                })\n                .then(() => {\n                    self._createSession();\n                    return self._loginInternal(login, password);\n                })\n                .then((user) => {\n                    self.connection.setConnection(user);\n                    self.session.sync(self.connection.getUserId())\n                        .then(() => resolve(self.connection.getUser()))\n                        .catch((err) => resolve(self.connection.getUser()));\n                })\n                .catch((err) => {\n                    self.logger.error('miapp.sdk.service.miappLogin error: ', err);\n                    reject(err);\n                });\n        });\n    };\n/**\n *\n * @param {?=} options\n * @return {?}\n */\npublic miappLoginInDemoMode(options?: ModuleServiceLoginOptionsInterface) {\n        const /** @type {?} */ self = this;\n\n        // generate one day tokens if not set\n        if (!options || !options.accessToken) {\n\n            const /** @type {?} */ now = new Date();\n            now.setDate(now.getDate() + 1);\n            const /** @type {?} */ tomorrow = now.getTime();\n            const /** @type {?} */ payload = tools.Base64.encode(JSON.stringify({roles: [], message: 'demo', endpoints: {}, dbs: [], exp: tomorrow}));\n            const /** @type {?} */ jwtSign = tools.Base64.encode(JSON.stringify({}));\n            const /** @type {?} */ token = jwtSign + '.' + payload + '.' + jwtSign;\n            options = {\n                accessToken: token,\n                idToken: token,\n                refreshToken: token,\n            };\n        }\n\n        return new self.promise((resolve, reject) => {\n            self._removeAll()\n                .then(() => {\n                    self._createSession();\n                    self.connection.setConnectionOffline(options);\n                    resolve(self.connection.getUser());\n                })\n                .catch((err) => {\n                    self.logger.error('miapp.sdk.service.miappLogin error: ', err);\n                    reject(err);\n                });\n        });\n    };\n/**\n * @return {?}\n */\npublic miappRoles() {\n        return JSON.parse(this.connection.getIdPayload({roles: []})).roles;\n    };\n/**\n * @return {?}\n */\npublic miappMessage() {\n        return JSON.parse(this.connection.getIdPayload({message: ''})).message;\n    };\n/**\n * @return {?}\n */\npublic miappIsLogin() {\n        return this.connection.isLogin();\n    };\n/**\n *\n * @return {?}\n */\npublic miappLogout(): Promise<void> {\n        const /** @type {?} */ self = this;\n        if (!self.connection.getClient()) {\n            return self._removeAll();\n        }\n\n        return self.connection.getClient().logout()\n            .then(() => {\n                return self._removeAll();\n            })\n            .catch(() => {\n                return self._removeAll();\n            });\n    };\n/**\n * Synchronize DB\n * \n * \n * @param {?=} fnInitFirstData a function with db as input and that return promise: call if DB is empty\n * @param {?=} fnInitFirstData_Arg arg to set to fnInitFirstData()\n * @return {?}\n */\npublic miappSync(fnInitFirstData?, fnInitFirstData_Arg?): Promise<void> {\n        const /** @type {?} */ self = this;\n        self.logger.log('miapp.sdk.service.miappSync');\n        if (!self.connection.isReady()) {\n            return self.promise.reject('miapp.sdk.service.miappSync : DB sync impossible. Did you login ?');\n        }\n\n        const /** @type {?} */ firstSync = (self.session.dbLastSync === null);\n\n        return new self.promise((resolve, reject) => {\n\n            self._createSession();\n            self.session.sync(self.connection.getUserId())\n                .then(() => {\n                    self.logger.log('miapp.sdk.service.miappSync resolved');\n                    return self.session.isEmpty();\n                })\n                .catch((err) => {\n                    self.logger.warn('miapp.sdk.service.miappSync warn: ', err);\n                    return self.session.isEmpty();\n                })\n                .then((isEmpty) => {\n                    self.logger.log('miapp.sdk.service.miappSync isEmpty : ', isEmpty, firstSync);\n                    if (isEmpty && firstSync && fnInitFirstData) {\n                        const /** @type {?} */ ret = fnInitFirstData(fnInitFirstData_Arg);\n                        if (ret && ret['catch'] instanceof Function) {\n                            return ret;\n                        }\n                        if (typeof ret === 'string') {\n                            self.logger.log(ret);\n                        }\n                    }\n                    return self.promise.resolve(); // self.connection.getUser());\n                })\n                .then(() => {\n                    self.logger.log('miapp.sdk.service.miappSync fnInitFirstData resolved');\n                    self.session.dbLastSync = new Date().getTime();\n                    return self.session.info();\n                })\n                .then((result: any) => {\n                    self.session.dbRecordCount = 0;\n                    if (result && result.doc_count) {\n                        self.session.dbRecordCount = result.doc_count;\n                    }\n                    self.logger.log('miapp.sdk.service.miappSync _dbRecordCount : ' + self.session.dbRecordCount);\n\n                    return self.connection.refreshConnection();\n                })\n                .then((code) => {\n                    if (code === 403) {\n                        reject({code: code, msg: 'unauthorized (need login)'});\n                    } else {\n                        resolve(); // self.connection.getUser()\n                    }\n                })\n                .catch((err) => {\n                    const /** @type {?} */ errMessage = 'miapp.sdk.service.miappSync err : ' + err.toString();\n                    // self.logger.error(errMessage);\n                    reject({code: 500, msg: errMessage});\n                })\n            ;\n        });\n    };\n/**\n * @param {?} data\n * @return {?}\n */\npublic miappPutInDb(data: any): Promise<string> {\n        const /** @type {?} */ self = this;\n        self.logger.log('miapp.sdk.service.miappPutInDb :', data);\n\n        if (!self.connection.getClientId() || !self.session.isReady()) {\n            return self.promise.reject('miapp.sdk.service.miappPutInDb : ' +\n                'DB put impossible. Need a user logged in.');\n        }\n\n        let /** @type {?} */ _id: string;\n        if (data && typeof data === 'object' && Object.keys(data).indexOf('_id')) {\n            _id = data._id;\n        }\n        if (!_id) {\n            _id = self._generateObjectUniqueId(self.connection.miappId);\n        }\n        let /** @type {?} */ crypto: SessionCryptoInterface;\n        if (self.connection.miappCrypto) {\n            crypto = {\n                obj: self.connection,\n                method: 'encrypt'\n            }\n        }\n\n        return self.session.put(\n            data,\n            _id,\n            self.connection.getClientId(),\n            self.sdk.org,\n            self.connection.miappVersion,\n            crypto);\n    };\n/**\n * @param {?} data_id\n * @return {?}\n */\npublic miappRemoveInDb(data_id: string): Promise<void> {\n        const /** @type {?} */ self = this;\n        self.logger.log('miapp.sdk.service.miappRemoveInDb ', data_id);\n\n        if (!self.session.isReady()) {\n            return self.promise.reject('miapp.sdk.service.miappRemoveInDb : DB put impossible. ' +\n                'Need a user logged in.');\n        }\n\n        if (!data_id || typeof data_id !== 'string') {\n            return self.promise.reject('miapp.sdk.service.miappRemoveInDb : DB put impossible. ' +\n                'Need the data._id.');\n        }\n\n        return self.session.remove(data_id);\n    };\n/**\n * @param {?} data_id\n * @return {?}\n */\npublic miappFindInDb(data_id: string): Promise<any> {\n        const /** @type {?} */ self = this;\n        if (!self.connection.getClientId() || !self.session.isReady()) {\n            return self.promise.reject('miapp.sdk.service.miappFindInDb : need a user logged in.');\n        }\n\n        let /** @type {?} */ crypto: SessionCryptoInterface;\n        if (self.connection.miappCrypto) {\n            crypto = {\n                obj: self.connection,\n                method: 'decrypt'\n            };\n        }\n\n        return self.session.get(data_id, crypto);\n    };\n/**\n * @return {?}\n */\npublic miappFindAllInDb(): Promise<any[]> {\n        const /** @type {?} */ self = this;\n\n        if (!self.connection.getClientId() || !self.session.isReady()) {\n            return self.promise.reject('miapp.sdk.service.miappFindAllInDb : need a user logged in.');\n        }\n\n        let /** @type {?} */ crypto: SessionCryptoInterface;\n        if (self.connection.miappCrypto) {\n            crypto = {\n                obj: self.connection,\n                method: 'decrypt'\n            };\n        }\n\n        return self.session.getAll(crypto);\n    };\n/**\n * Logout then Login\n * \n * @param {?} login\n * @param {?} password\n * @param {?=} updateProperties\n * @return {?}\n */\nprivate _loginInternal(login: string, password: string, updateProperties?: any): Promise<any> {\n        const /** @type {?} */ self = this;\n        self.logger.log('miapp.sdk.service._loginInternal');\n        if (!self.connection.isReady()) {\n            return self.promise.reject('miapp.sdk.service._loginInternal : need init');\n        }\n\n        return new self.promise((resolve, reject) => {\n\n                self.connection.getClient().logout()\n                    .then(msg => {\n                        return self.connection.getClient().login(login, password, updateProperties);\n                    })\n                    .then(loginUser => {\n                        loginUser.email = login;\n                        resolve(loginUser);\n                    })\n                    .catch(err => {\n                        self.logger.error('miapp.sdk.service._loginInternal error : ' + err);\n                        reject(err);\n                    });\n            }\n        );\n    };\n/**\n * @return {?}\n */\nprivate _removeAll(): Promise<void> {\n        this.connection.destroy();\n        return this.session.destroy();\n    };\n/**\n * @return {?}\n */\nprivate _createSession(): void {\n        const /** @type {?} */ dbs = this.connection.getDBs();\n        this.session.create();\n        this.session.setRemote(dbs);\n    };\n/**\n * @param {?=} a\n * @return {?}\n */\nprivate _testPromise(a?): Promise<any> {\n        if (a) {\n            return this.promise.resolve('test promise ok ' + a);\n        }\n        return new this.promise((resolve, reject) => {\n            resolve('test promise ok');\n        });\n    };\nprivate static _srvDataUniqId = 0;\n/**\n * @param {?} appName\n * @param {?=} type\n * @param {?=} name\n * @return {?}\n */\nprivate _generateObjectUniqueId(appName, type?, name?) {\n\n        // return null;\n        const /** @type {?} */ now = new Date();\n        const /** @type {?} */ simpleDate = '' + now.getFullYear() + '' + now.getMonth() + '' + now.getDate()\n            + '' + now.getHours() + '' + now.getMinutes(); // new Date().toISOString();\n        const /** @type {?} */ sequId = ++InternalService._srvDataUniqId;\n        let /** @type {?} */ UId = '';\n        if (appName && appName.charAt(0)) {\n            UId += appName.charAt(0) + '';\n        }\n        if (type && type.length > 3) {\n            UId += type.substring(0, 4);\n        }\n        if (name && name.length > 3) {\n            UId += name.substring(0, 4);\n        }\n        UId += simpleDate + '' + sequId;\n        return UId;\n    }\n\n}\n\nfunction InternalService_tsickle_Closure_declarations() {\n/** @type {?} */\nInternalService._srvDataUniqId;\n/** @type {?} */\nInternalService.prototype.sdk;\n/** @type {?} */\nInternalService.prototype.logger;\n/** @type {?} */\nInternalService.prototype.promise;\n/** @type {?} */\nInternalService.prototype.storage;\n/** @type {?} */\nInternalService.prototype.session;\n/** @type {?} */\nInternalService.prototype.connection;\n}\n\n","// import PouchDB from 'pouchdb';\n// let PouchDB: any;\n\n\nimport PouchDB from 'pouchdb/dist/pouchdb.js';\n\nconst /** @type {?} */ Pouch = window['PouchDB'] || require('pouchdb').default;\n\nexport interface SessionCryptoInterface {\n    obj: Object,\n    method: string\n}\nexport class Session {\npublic dbRecordCount: number;\npublic dbLastSync: number;\nprivate db: PouchDB;\nprivate remoteDb: PouchDB;\nprivate remoteUri: string;\nprivate dbs: Array<string>;\nconstructor() {\n        this.db = null;\n        this.dbRecordCount = 0;\n        this.dbLastSync = null;\n        this.remoteDb = null;\n        this.dbs = [];\n    };\n/**\n * @return {?}\n */\npublic isReady(): boolean {\n        return !!this.db;\n    }\n/**\n * @param {?=} force\n * @return {?}\n */\npublic create(force?: boolean): void {\n\n        if (force || !this.db) {\n            this.dbRecordCount = 0;\n            this.dbLastSync = new Date().getTime();\n            this.db = {};\n            this.db = new Pouch('miapp_db'); // , {adapter: 'websql'} ???\n        }\n    }\n/**\n * @return {?}\n */\npublic destroy(): Promise<void> {\n        const /** @type {?} */ cleanSessionFn = () => {\n            this.dbRecordCount = 0;\n            this.dbLastSync = null;\n        };\n\n        if (!this.db) {\n            cleanSessionFn();\n            return Promise.resolve();\n        }\n\n        if (this.db && !this.db.destroy) {\n            return Promise.reject('miapp.sdk.service._removeSession : DB clean impossible.');\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db.destroy((err, info) => {\n                if (err) {\n                    reject(err);\n                } else {\n                    cleanSessionFn();\n                    resolve();\n                }\n            });\n        });\n    };\n/**\n * @param {?} dbs\n * @return {?}\n */\npublic setRemote(dbs: Array<string>): void {\n        this.dbs = dbs;\n    }\n/**\n * @param {?} userId\n * @return {?}\n */\npublic sync(userId: string): Promise<void> {\n\n        if (!this.db) {\n            return Promise.reject({code: 408, msg: 'need db'});\n        }\n        if (!this.dbs || !this.dbs.length) {\n            return Promise.reject({code: 408, msg: 'need db remote'});\n        }\n\n        return new Promise((resolve, reject) => {\n            try {\n\n                if (!this.remoteDb || this.remoteUri !== this.dbs[0]) {\n                    this.remoteUri = this.dbs[0];\n                    this.remoteDb = new Pouch(this.remoteUri);\n                    // todo , {headers: {'Authorization': 'Bearer ' + id_token}});\n                }\n\n                this.db\n                    .sync(this.remoteDb, {\n                        filter: (doc) => {\n                            if (!userId) {\n                                return;\n                            } else if (doc && doc.miappUserId === userId) {\n                                return doc;\n                            }\n                        }\n                    })\n                    .on('complete', (info) => resolve(info))\n                    .on('error', (err) => reject({code: 401, msg: err}))\n                    .on('denied', (err) => reject({code: 403, msg: err}));\n\n            } catch ( /** @type {?} */err) {\n                reject({code: 500, msg: err});\n            }\n        });\n    }\n/**\n * @param {?} data\n * @param {?} _id\n * @param {?} uid\n * @param {?} oid\n * @param {?} ave\n * @param {?=} crypto\n * @return {?}\n */\npublic put(data: any, _id: string, uid: string, oid: string, ave: string, crypto?: SessionCryptoInterface): Promise<string> {\n\n        if (!this.db) {\n            return Promise.reject('need db');\n        }\n\n        if (!data || !_id || !uid || !oid || !ave) {\n            return Promise.reject('need formated data');\n        }\n\n        const /** @type {?} */ dataWithoutIds = JSON.parse(JSON.stringify(data));\n        delete dataWithoutIds._id;\n        delete dataWithoutIds._rev;\n        delete dataWithoutIds.miappUserId;\n        delete dataWithoutIds.miappOrgId;\n        delete dataWithoutIds.miappAppVersion;\n        delete dataWithoutIds.miappData;\n\n        let /** @type {?} */ resultAsString = this.write(this.value(dataWithoutIds));\n        if (crypto) {\n            resultAsString = crypto.obj[crypto.method](resultAsString);\n        }\n        const /** @type {?} */ toStore = {\n            _id: _id,\n            miappUserId: uid,\n            miappOrgId: oid,\n            miappAppVersion: ave,\n            miappData: resultAsString\n        };\n\n        return new Promise((resolve, reject) => {\n            this.db.put(toStore, (err, response) => {\n                if (response && response.ok && response.id && response.rev) {\n                    // data._id = response.id;\n                    // data._rev = response.rev;\n                    this.dbRecordCount++;\n                    resolve(response.id);\n                } else {\n                    reject(err);\n                }\n            });\n        });\n    }\n/**\n * @param {?} data_id\n * @return {?}\n */\npublic remove(data_id: string): Promise<void> {\n\n        if (!this.db) {\n            return Promise.reject('need db');\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db.get(data_id)\n                .then((doc) => {\n                    doc._deleted = true;\n                    return this.db.put(doc);\n                })\n                .then((result) => {\n                    resolve();\n                })\n                .catch((err) => {\n                    reject(err);\n                });\n        });\n    }\n/**\n * @param {?} data_id\n * @param {?=} crypto\n * @return {?}\n */\npublic get(data_id: string, crypto?: SessionCryptoInterface): Promise<any> {\n\n        if (!this.db) {\n            return Promise.reject('need db');\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db.get(data_id)\n                .then(row => {\n                    if (!!row && !!row.miappData) {\n                        let /** @type {?} */ data = row.miappData;\n                        if (crypto) {\n                            data = crypto.obj[crypto.method](data);\n                        } else {\n                            data = JSON.parse(data);\n                        }\n                        let /** @type {?} */ result = data;\n                        result._id = row._id;\n                        result._rev = row._rev;\n                        result = JSON.parse(JSON.stringify(result));\n                        resolve(result);\n                    } else {\n                        reject('none');\n                    }\n                })\n                .catch(err => reject(err));\n        });\n    }\n/**\n * @param {?=} crypto\n * @return {?}\n */\npublic getAll(crypto?: SessionCryptoInterface): Promise<any[]> {\n\n        if (!this.db) {\n            return Promise.reject('need db');\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db.allDocs({include_docs: true, descending: true})\n                .then(rows => {\n                    const /** @type {?} */ all = [];\n                    rows.rows.forEach(row => {\n                        if (!!row && !!row.doc.miappData && !!row.doc._id) {\n                            let /** @type {?} */ data = row.doc.miappData;\n                            if (crypto) {\n                                data = crypto.obj[crypto.method](data);\n                            } else {\n                                data = JSON.parse(data);\n                            }\n                            let /** @type {?} */ result = data;\n                            result._id = row.doc._id;\n                            result._rev = row.doc._rev;\n                            result = JSON.parse(JSON.stringify(result));\n                            all.push(result);\n                        } else {\n                            // todo reject('row format pb');\n                        }\n                    });\n                    resolve(all);\n                })\n                .catch(err => reject(err));\n        });\n    }\n/**\n * @return {?}\n */\npublic isEmpty(): Promise<boolean> {\n\n        if (!this.db) {\n            return Promise.reject('need db');\n        }\n\n        return new Promise((resolve, reject) => {\n            this.db\n                .allDocs({\n                    // filter: function (doc) {\n                    //    if (!self.connection.user || !self.connection.user._id) return doc;\n                    //    if (doc.miappUserId === self.connection.user._id) return doc;\n                    // }\n                })\n                .then((response) => {\n                    if (!response) {\n                        reject();\n                    } else {\n                        this.dbRecordCount = response.total_rows;\n                        if (response.total_rows && response.total_rows > 0) {\n                            resolve(false);\n                        } else {\n                            resolve(true);\n                        }\n                    }\n                })\n                .catch((err) => reject(err));\n        });\n    }\n/**\n * @return {?}\n */\npublic info(): Promise<any> {\n        if (!this.db) {\n            return Promise.reject('none');\n        }\n        return this.db.info();\n    }\n/**\n * @param {?} item\n * @return {?}\n */\nprivate write(item: any): string {\n        let /** @type {?} */ value = 'null';\n        const /** @type {?} */ t = typeof(item);\n        if (t === 'undefined') {\n            value = 'null';\n        } else if (value === null) {\n            value = 'null';\n        } else if (t === 'string') {\n            value = JSON.stringify({string: item})\n        } else if (t === 'number') {\n            value = JSON.stringify({number: item});\n        } else if (t === 'boolean') {\n            value = JSON.stringify({bool: item});\n        } else if (t === 'object') {\n            value = JSON.stringify({json: item});\n        }\n        return value;\n    }\n/**\n * @param {?} item\n * @return {?}\n */\nprivate value(item: any): any {\n\n        const /** @type {?} */ t = typeof(item);\n        if (t !== 'object') {\n            return item;\n        }\n\n        if ('string' in item) {\n            return item.string;\n        } else if ('number' in item) {\n            return item.number.valueOf();\n        } else if ('bool' in item) {\n            return item.bool.valueOf();\n        } else if ('json' in item) {\n            return item.json;\n        } else {\n            return item;\n        }\n    }\n}\n\nfunction Session_tsickle_Closure_declarations() {\n/** @type {?} */\nSession.prototype.dbRecordCount;\n/** @type {?} */\nSession.prototype.dbLastSync;\n/** @type {?} */\nSession.prototype.db;\n/** @type {?} */\nSession.prototype.remoteDb;\n/** @type {?} */\nSession.prototype.remoteUri;\n/** @type {?} */\nSession.prototype.dbs;\n}\n\n","import {LocalStorage} from '../tools/storage';\nimport {Client} from './client';\nimport * as tools from '../tools';\nimport {ModuleServiceLoginOptionsInterface, SdkInterface} from '../sdk/interfaces';\nimport * as connection from './index';\nexport class Connection {\npublic miappId: string;\npublic miappVersion: string;\npublic miappCrypto: boolean;\nprivate _cryptoSalt: string;\nprivate _client: Client;\nprivate _user: any;\npublic accessToken: string;\npublic idToken: string;\npublic refreshToken: string;\npublic states: { [s: string]: { state: boolean, time: number }; };\npublic endpoints: Array<string>;\npublic accessTokenPrevious: string;\n/**\n * @param {?} _sdk\n * @param {?} _storage\n */\nconstructor(private _sdk: SdkInterface,\nprivate _storage: LocalStorage) {\n        this._client = null;\n        this._user = null;\n        this._cryptoSalt = this._storage.get('_cryptoSalt') || null;\n\n        this.accessToken = this._storage.get('accessToken') || null;\n        this.accessTokenPrevious = this._storage.get('accessTokenPrevious') || null;\n        this.idToken = this._storage.get('idToken') || null;\n        this.refreshToken = this._storage.get('refreshToken') || null;\n        this.states = this._storage.get('states') || {};\n        this.endpoints = [];\n    };\n/**\n * @return {?}\n */\nisReady(): boolean {\n        return !!this._client && this._client.isReady();\n    }\n/**\n * @return {?}\n */\ndestroy(): void {\n\n        this._storage.remove('accessToken');\n        this._storage.remove('idToken');\n        this._storage.remove('refreshToken');\n        this._storage.remove('states');\n        this._storage.remove('_cryptoSalt');\n        // Backup - do not remove : this._storage.remove('accessTokenPrevious');\n        if (this.accessToken) {\n            this.accessTokenPrevious = this.accessToken;\n            this._storage.set('accessTokenPrevious', this.accessTokenPrevious);\n        }\n\n        this._user = null;\n        if (this._client) {\n            this._client.setClientId(null);\n        }\n        this.accessToken = null;\n        this.idToken = null;\n        this.refreshToken = null;\n        this.states = {}; // new Map<string, boolean>();\n    }\n/**\n * @param {?} client\n * @return {?}\n */\nsetClient(client: Client): void {\n\n        this._client = client;\n        if (!this._user) {\n            this._user = {};\n        }\n\n        this._user._id = this._client.clientId;\n        this._user._name = JSON.parse(this.getIdPayload({name: ''})).name;\n    }\n/**\n * @param {?} user\n * @return {?}\n */\nsetUser(user: any): void {\n        this._user = user;\n        if (this._user._id) {\n            this._client.setClientId(this._user._id)\n        }\n    }\n/**\n * @return {?}\n */\ngetUser(): any {\n        return this._user;\n    }\n/**\n * @return {?}\n */\ngetUserId(): any {\n        return this._user ? this._user._id : null;\n    }\n/**\n * @return {?}\n */\ngetClient(): Client {\n        return this._client;\n    }\n/**\n * @param {?} value\n * @return {?}\n */\nsetCryptoSalt(value: string) {\n        // this.miappCrypto = true;\n        this._cryptoSalt = value;\n        this._storage.set('_cryptoSalt', this._cryptoSalt);\n    }\n/**\n * @param {?} data\n * @return {?}\n */\nencrypt(data: any): string {\n\n        if (typeof data !== 'string') {\n            data = JSON.stringify(data);\n        }\n\n        if (this.miappCrypto && this._cryptoSalt) {\n            // const key = '' + this.miappId + '' + this.getClientId();\n            const /** @type {?} */ key = this._cryptoSalt;\n            return tools.Xor.encrypt(data, key);\n        } else {\n            return data;\n        }\n    }\n/**\n * @param {?} data\n * @return {?}\n */\ndecrypt(data: string): any {\n        let /** @type {?} */ decrypted = data;\n        if (this.miappCrypto && this._cryptoSalt) {\n            // const key = '' + this.miappId + '' + this.getClientId();\n            const /** @type {?} */ key = this._cryptoSalt;\n            decrypted = tools.Xor.decrypt(data, key);\n        }\n        try {\n            decrypted = JSON.parse(decrypted);\n        } catch ( /** @type {?} */err) {\n        }\n\n        return decrypted;\n    }\n/**\n * @return {?}\n */\nisLogin() {\n        let /** @type {?} */ exp = true;\n        try {\n\n            const /** @type {?} */ payload = this.refreshToken.split('.')[1];\n            const /** @type {?} */ decoded = JSON.parse(tools.Base64.decode(payload));\n            exp = ((new Date().getTime() / 1000) >= decoded.exp);\n\n        } catch ( /** @type {?} */e) {\n        }\n        return !exp;\n    };\n/**\n * @return {?}\n */\ngetClientId(): string {\n        if (!this._client) {\n            return null;\n        }\n        return this._client.clientId;\n    }\n/**\n * @param {?=} def\n * @return {?}\n */\ngetIdPayload(def?: any): string {\n        if (def && typeof def !== 'string') {\n            def = JSON.stringify(def);\n        }\n\n        try {\n            const /** @type {?} */ payload = this.idToken.split('.')[1];\n            if (payload) {\n                return tools.Base64.decode(payload);\n            }\n        } catch ( /** @type {?} */e) {\n        }\n        return def ? def : null;\n    }\n/**\n * @param {?=} def\n * @return {?}\n */\ngetAccessPayload(def?: any): string {\n        if (def && typeof def !== 'string') {\n            def = JSON.stringify(def);\n        }\n\n        try {\n            const /** @type {?} */ payload = this.accessToken.split('.')[1];\n            if (payload) {\n                return tools.Base64.decode(payload);\n            }\n        } catch ( /** @type {?} */e) {\n        }\n        return def ? def : null;\n    }\n/**\n * @param {?=} def\n * @return {?}\n */\ngetPreviousAccessPayload(def?: any): string {\n        if (def && typeof def !== 'string') {\n            def = JSON.stringify(def);\n        }\n\n        try {\n            const /** @type {?} */ payload = this.accessTokenPrevious.split('.')[1];\n            if (payload) {\n                return tools.Base64.decode(payload);\n            }\n        } catch ( /** @type {?} */e) {\n        }\n        return def ? def : null;\n    }\n/**\n * @return {?}\n */\nrefreshConnection(): Promise<any> {\n        let /** @type {?} */ code = 0;\n\n        // token not expired : ok\n        if (this.accessToken) {\n            const /** @type {?} */ payload = this.accessToken.split('.')[1];\n            const /** @type {?} */ decoded = tools.Base64.decode(payload);\n            // console.log('new Date().getTime() < JSON.parse(decoded).exp :', (new Date().getTime() / 1000), JSON.parse(decoded).exp);\n            if ((new Date().getTime() / 1000) < JSON.parse(decoded).exp) {\n                return Promise.resolve(code);\n            }\n        }\n\n        // remove expired refreshToken\n        if (this.refreshToken) {\n            const /** @type {?} */ payload = this.refreshToken.split('.')[1];\n            const /** @type {?} */ decoded = tools.Base64.decode(payload);\n            if ((new Date().getTime() / 1000) >= JSON.parse(decoded).exp) {\n                this._storage.remove('refreshToken');\n            }\n        }\n\n        // remove expired accessToken & idToken & store it as Previous one\n        this.accessTokenPrevious = this.accessToken;\n        this._storage.set('accessTokenPrevious', this.accessTokenPrevious);\n        this._storage.remove('accessToken');\n        this._storage.remove('idToken');\n        this.accessToken = null;\n        this.idToken = null;\n\n        // refresh authentication\n        return new Promise((resolve, reject) => {\n            this.getClient().reAuthenticate()\n                .then(user => {\n                    this.setConnection(user);\n                    resolve(user);\n                })\n                .catch(err => {\n                    if (err && err.code === 408) {\n                        code = 408; // no api uri or basic timeout : offline\n                    } else if (err && err.code === 404) {\n                        code = 404; // page not found : offline\n                    } else if (err && err.code === 410) {\n                        code = 403; // token expired or device not sure : need relogin\n                    } else if (err) {\n                        code = 403; // forbidden : need relogin\n                    }\n\n                    resolve(code);\n                });\n        });\n    };\n/**\n * @param {?} clientUser\n * @return {?}\n */\nsetConnection(clientUser: any) {\n\n        // only in private storage\n        if (clientUser.access_token) {\n            this.accessToken = clientUser.access_token;\n            this._storage.set('accessToken', this.accessToken);\n            delete clientUser.access_token;\n\n            const /** @type {?} */ salt = JSON.parse(this.getAccessPayload({salt: ''})).salt;\n            if (salt) {\n                this.setCryptoSalt(salt);\n            }\n        }\n        if (clientUser.id_token) {\n            this.idToken = clientUser.id_token;\n            this._storage.set('idToken', this.idToken);\n            delete clientUser.id_token;\n        }\n        if (clientUser.refresh_token) {\n            this.refreshToken = clientUser.refresh_token;\n            this._storage.set('refreshToken', this.refreshToken);\n            delete clientUser.refresh_token;\n        }\n\n        // expose roles, message\n        // clientUser.roles = self.miappRoles();\n        // clientUser.message = self.miappMessage();\n        clientUser.roles = JSON.parse(this.getIdPayload({roles: []})).roles;\n        clientUser.message = JSON.parse(this.getIdPayload({message: ''})).message;\n        this.setUser(clientUser);\n    };\n/**\n * @param {?} options\n * @return {?}\n */\nsetConnectionOffline(options: ModuleServiceLoginOptionsInterface): void {\n\n        // if (this.user) {\n        //     this.user._id = 'demo';\n        // }\n        // if (this.client) {\n        //     this.client.clientId = 'demo';\n        // }\n        // const tmp = tools.Base64.encode(JSON.stringify({}));\n        // this.accessToken = tmp + '.' + tmp + '.' + tmp;\n\n        this.accessToken = options.accessToken;\n        this.idToken = options.idToken;\n        this.refreshToken = options.refreshToken;\n        this.setUser({\n            roles: JSON.parse(this.getIdPayload({roles: []})).roles,\n            message: JSON.parse(this.getIdPayload({message: ''})).message,\n            _id: 'demo'\n        });\n    }\n/**\n * @param {?=} options\n * @return {?}\n */\ngetEndpoints(options?): Array<string> {\n\n        let /** @type {?} */ ea = ['https://miapp.io/api', 'https://miapp-proxy.herokuapp.com/api'];\n        let /** @type {?} */ filteredEa = [];\n\n        if (!this._sdk.prod) {\n            ea = ['http://localhost:5894/api', 'https://miapp-sandbox.herokuapp.com/api'];\n        }\n\n        if (this.accessToken) {\n            const /** @type {?} */ endpoints = JSON.parse(this.getAccessPayload({endpoints: {}})).endpoints;\n            if (endpoints.length) {\n                ea = [];\n                endpoints.forEach((endpoint) => {\n                    ea.push(endpoint.uri);\n                });\n            }\n        }\n\n        if (this.accessTokenPrevious) {\n            const /** @type {?} */ endpoints = JSON.parse(this.getPreviousAccessPayload({endpoints: {}})).endpoints;\n            if (endpoints.length) {\n                endpoints.forEach((endpoint) => {\n                    if (ea.indexOf(endpoint.uri) < 0) {\n                        ea.push(endpoint.uri);\n                    }\n                });\n            }\n        }\n\n        if (options && options.filter && options.filter === 'theBestOne') {\n            if (this.states && Object.keys(this.states).length) {\n                for (let /** @type {?} */ i = 0; (i < ea.length) && (filteredEa.length === 0); i++) {\n                    const /** @type {?} */ endpoint = ea[i];\n                    if (this.states[endpoint] && this\n                            .states[endpoint].state) {\n                        filteredEa.push(endpoint);\n                    }\n                }\n            } else if (ea.length) {\n                filteredEa = [ea[0]];\n            }\n        } else {\n            filteredEa = ea;\n        }\n\n        return filteredEa;\n    };\n/**\n * @param {?=} options\n * @return {?}\n */\ngetDBs(options?): string[] {\n        if (!this.accessToken) {\n            return [];\n        }\n\n        const /** @type {?} */ random = Math.random() % 2;\n        let /** @type {?} */ dbs = JSON.parse(this.getAccessPayload({dbs: []})).dbs || [];\n\n        // need to synchronize db\n        if (random === 0) {\n            dbs = dbs.sort();\n        } else if (random === 1) {\n            dbs = dbs.reverse();\n        }\n\n        let /** @type {?} */ filteredDBs = [];\n        if (options && options.filter && options.filter === 'theBestOne') {\n            if (this.states && Object.keys(this.states).length) {\n                for (let /** @type {?} */ i = 0; (i < dbs.length) && (filteredDBs.length === 0); i++) {\n                    const /** @type {?} */ endpoint = dbs[i];\n                    if (this.states[endpoint].state) {\n                        filteredDBs.push(endpoint);\n                    }\n                }\n            } else if (dbs.length) {\n                filteredDBs = [dbs[0]];\n            }\n        } else {\n            filteredDBs = dbs;\n        }\n\n        return filteredDBs;\n    };\n/**\n * @return {?}\n */\nverifyConnectionStates(): Promise<any> {\n\n        const /** @type {?} */ currentTime = new Date().getTime();\n\n        // todo need verification ? not yet (cache)\n        // if (Object.keys(this.states).length > 0) {\n        //     const time = this.states[Object.keys(this.states)[0]].time;\n        //     if (currentTime < time) {\n        //         return Promise.resolve();\n        //     }\n        // }\n\n        // verify via GET status on Endpoints & DBs\n        const /** @type {?} */ promises = [];\n        this.states = {};\n        this.endpoints = this.getEndpoints();\n        this.endpoints.forEach((endpoint) => {\n            promises.push(new Promise((resolve, reject) => {\n                // console.log(endpoint + '/status?isok=' + this._sdk.version);\n                new connection.Ajax()\n                    .get({\n                        url: endpoint + '/status?isok=' + this._sdk.version,\n                        headers: {'Content-Type': 'application/json', 'Accept': 'text/json'}\n                    })\n                    .then(data => {\n                        let /** @type {?} */ state = false;\n                        if (data && data.isok) {\n                            state = true;\n                        }\n                        this.states[endpoint] = {state: state, time: currentTime};\n                        resolve();\n                    })\n                    .catch(err => {\n                        this.states[endpoint] = {state: false, time: currentTime};\n                        resolve();\n                    });\n            }));\n        });\n\n        const /** @type {?} */ dbs = this.getDBs();\n        dbs.forEach((dbEndpoint) => {\n            promises.push(new Promise((resolve, reject) => {\n                new connection.Ajax()\n                    .get({\n                        url: dbEndpoint,\n                        headers: {'Content-Type': 'application/json', 'Accept': 'text/json'}\n                    })\n                    .then(data => {\n                        this.states[dbEndpoint] = {state: true, time: currentTime};\n                        resolve();\n                    })\n                    .catch(err => {\n                        this.states[dbEndpoint] = {state: false, time: currentTime};\n                        resolve();\n                    });\n            }));\n        });\n        return Promise.all(promises);\n    };\n\n}\n\nfunction Connection_tsickle_Closure_declarations() {\n/** @type {?} */\nConnection.prototype.miappId;\n/** @type {?} */\nConnection.prototype.miappVersion;\n/** @type {?} */\nConnection.prototype.miappCrypto;\n/** @type {?} */\nConnection.prototype._cryptoSalt;\n/** @type {?} */\nConnection.prototype._client;\n/** @type {?} */\nConnection.prototype._user;\n/** @type {?} */\nConnection.prototype.accessToken;\n/** @type {?} */\nConnection.prototype.idToken;\n/** @type {?} */\nConnection.prototype.refreshToken;\n/** @type {?} */\nConnection.prototype.states;\n/** @type {?} */\nConnection.prototype.endpoints;\n/** @type {?} */\nConnection.prototype.accessTokenPrevious;\n/** @type {?} */\nConnection.prototype._sdk;\n/** @type {?} */\nConnection.prototype._storage;\n}\n\n","import {Ajax} from './ajax';\nimport {LocalStorage} from '../tools/storage';\nimport {SdkInterface} from '../sdk/interfaces';\nexport class Client {\npublic clientId: string;\nprivate clientUuid: string;\nprivate clientInfo: string;\nprivate refreshToken: string;\nprivate static refreshCount = 0;\n/**\n * @param {?} appId\n * @param {?} URI\n * @param {?} storage\n * @param {?} sdk\n */\nconstructor(private appId: string,\nprivate URI: string,\nprivate storage: LocalStorage,\nprivate sdk: SdkInterface) {\n\n        let uuid: string = this.storage.get('uuid') || 'uuid-' + Math.random();\n        let info: string = this.storage.get('info');\n        if (!info && window && window.navigator) {\n            info = window.navigator.appName + '@' + window.navigator.appVersion + '-' + window.navigator.userAgent;\n        }\n        if (window && window['device'] && window['device'].uuid) {\n            uuid = window['device'].uuid;\n        }\n        this.setClientUuid(uuid);\n        this.setClientInfo(info);\n        this.refreshToken = this.storage.get('refreshToken');\n        this.clientId = this.storage.get('clientId');\n    };\n/**\n * @param {?} value\n * @return {?}\n */\npublic setClientId(value: string) {\n        this.clientId = value;\n        this.storage.set('clientId', this.clientId);\n    }\n/**\n * @param {?} value\n * @return {?}\n */\npublic setClientUuid(value: string) {\n        this.clientUuid = value;\n        this.storage.set('clientUuid', this.clientUuid);\n    }\n/**\n * @param {?} value\n * @return {?}\n */\npublic setClientInfo(value: string) {\n        this.clientInfo = value;\n        // this.storage.set('clientInfo', this.clientInfo);\n    }\n/**\n * @param {?} value\n * @return {?}\n */\npublic setRefreshToken(value: string) {\n        this.refreshToken = value;\n        this.storage.set('refreshToken', this.refreshToken);\n    }\n/**\n * @param {?} login\n * @param {?} password\n * @param {?=} updateProperties\n * @return {?}\n */\npublic login(login: string, password: string, updateProperties?: any): Promise<any> {\n\n        if (!this.URI) {\n            console.error('no api uri');\n            return Promise.reject({code: 408, msg: 'no api uri'});\n        }\n\n        const /** @type {?} */ urlLogin = this.URI + '/users';\n        const /** @type {?} */ dataLogin = {\n            name: login,\n            username: login,\n            email: login,\n            password: password\n        };\n\n        return new Ajax()\n            .post({\n                url: urlLogin,\n                data: dataLogin,\n                headers: {'Content-Type': 'application/json', 'Accept': 'text/json'}\n            })\n            .then(createdUser => {\n\n                this.setClientId(createdUser._id);\n                const /** @type {?} */ urlToken = this.URI + '/oauth/token';\n                const /** @type {?} */ dataToken = {\n                    grant_type: 'client_credentials',\n                    client_id: this.clientId,\n                    client_secret: password,\n                    client_udid: this.clientUuid,\n                    client_info: this.clientInfo,\n                    audience: this.appId,\n                    scope: JSON.stringify(this.sdk)\n                };\n                return new Ajax()\n                    .post({\n                        url: urlToken,\n                        data: dataToken,\n                        headers: {'Content-Type': 'application/json', 'Accept': 'text/json'}\n                    });\n            });\n    }\n/**\n * @return {?}\n */\npublic reAuthenticate(): Promise<any> {\n\n        if (!this.URI) {\n            console.error('no api uri');\n            return Promise.reject({code: 408, msg: 'no api uri'});\n        }\n        const /** @type {?} */ url = this.URI + '/oauth/token';\n        const /** @type {?} */ data = {\n            grant_type: 'refresh_token',\n            client_id: this.clientId,\n            client_udid: this.clientUuid,\n            client_info: this.clientInfo,\n            audience: this.appId,\n            scope: JSON.stringify(this.sdk),\n            refresh_token: this.refreshToken,\n            refresh_extra: Client.refreshCount++,\n        };\n        return new Ajax()\n            .post({\n                url: url,\n                data: data,\n                headers: {'Content-Type': 'application/json', 'Accept': 'text/json'}\n            });\n    }\n/**\n * @return {?}\n */\npublic logout() {\n\n        if (!this.URI) {\n            console.error('no api uri');\n            return Promise.reject({code: 408, msg: 'no api uri'});\n        }\n\n        const /** @type {?} */ url = this.URI + '/oauth/revoke';\n\n        if (!this.refreshToken || !this.clientId) {\n            return Promise.resolve();\n        }\n\n        const /** @type {?} */ data = {\n            token: this.refreshToken,\n            client_id: this.clientId,\n            client_udid: this.clientUuid,\n            client_info: this.clientInfo,\n            audience: this.appId,\n            scope: JSON.stringify(this.sdk)\n        };\n\n        this.setRefreshToken(null);\n        Client.refreshCount = 0;\n\n        return new Ajax()\n            .post({\n                url: url,\n                data: data,\n                headers: {'Content-Type': 'application/json', 'Accept': 'text/json'}\n            });\n    }\n/**\n * @return {?}\n */\npublic isReady(): boolean {\n        return !!this.URI;\n    }\n}\n\nfunction Client_tsickle_Closure_declarations() {\n/** @type {?} */\nClient.refreshCount;\n/** @type {?} */\nClient.prototype.clientId;\n/** @type {?} */\nClient.prototype.clientUuid;\n/** @type {?} */\nClient.prototype.clientInfo;\n/** @type {?} */\nClient.prototype.refreshToken;\n/** @type {?} */\nClient.prototype.appId;\n/** @type {?} */\nClient.prototype.URI;\n/** @type {?} */\nClient.prototype.storage;\n/** @type {?} */\nClient.prototype.sdk;\n}\n\n","import {XHRPromise} from './xhrpromise';\n\nexport interface XhrOptionsInterface {\n    url: string,\n    data?: any,\n    headers?: any,\n    async?: boolean,\n    username?: string,\n    password?: string,\n    withCredentials?: boolean\n}\nexport class Ajax {\nprivate xhr: XHRPromise;\nconstructor() {\n        this.xhr = new XHRPromise();\n    };\n/**\n * @param {?} args\n * @return {?}\n */\npublic post(args: XhrOptionsInterface): Promise<any> {\n\n        const /** @type {?} */ opt: any = {\n            method: 'POST',\n            url: args.url,\n            data: JSON.stringify(args.data)\n        };\n        if (args.headers) {\n            opt.headers = args.headers;\n        }\n\n        return this.xhr\n            .send(opt)\n            .then(res => {\n                // console.log('res:', res);\n                if (res.status &&\n                    (parseInt(res.status, 10) < 200 || parseInt(res.status, 10) >= 300)) {\n                    res.reason = 'status';\n                    return Promise.reject(res);\n                }\n                return Promise.resolve(res.responseText);\n            });\n    }\n/**\n * @param {?} args\n * @return {?}\n */\npublic put(args: XhrOptionsInterface): Promise<any> {\n        const /** @type {?} */ opt: any = {\n            method: 'PUT',\n            url: args.url,\n            data: JSON.stringify(args.data)\n        };\n        if (args.headers) {\n            opt.headers = args.headers;\n        }\n        return this.xhr\n            .send(opt)\n            .then(res => {\n                // console.log('res:', res);\n                if (res.status &&\n                    (parseInt(res.status, 10) < 200 || parseInt(res.status, 10) >= 300)) {\n                    res.reason = 'status';\n                    return Promise.reject(res);\n                }\n                return Promise.resolve(res.responseText);\n            });\n    }\n/**\n * @param {?} args\n * @return {?}\n */\npublic delete(args: XhrOptionsInterface): Promise<any> {\n        const /** @type {?} */ opt: any = {\n            method: 'DELETE',\n            url: args.url,\n            data: JSON.stringify(args.data)\n        };\n        if (args.headers) {\n            opt.headers = args.headers;\n        }\n        return this.xhr\n            .send(opt)\n            .then(res => {\n                // console.log('res:', res);\n                if (res.status &&\n                    (parseInt(res.status, 10) < 200 || parseInt(res.status, 10) >= 300)) {\n                    res.reason = 'status';\n                    return Promise.reject(res);\n                }\n                return Promise.resolve(res.responseText);\n            });\n    }\n/**\n * @param {?} args\n * @return {?}\n */\npublic get(args: XhrOptionsInterface): Promise<any> {\n        const /** @type {?} */ opt: any = {\n            method: 'GET',\n            url: args.url\n        };\n        if (args.data) {\n            opt.data = args.data;\n        }\n        if (args.headers) {\n            opt.headers = args.headers;\n        }\n        // console.log('send:', opt);\n        return this.xhr\n            .send(opt)\n            .then(res => {\n                // console.log('res:', res);\n                if (res.status &&\n                    (parseInt(res.status, 10) < 200 || parseInt(res.status, 10) >= 300)) {\n                    res.reason = 'status';\n                    return Promise.reject(res);\n                }\n                return Promise.resolve(res.responseText);\n            });\n    }\n}\n\nfunction Ajax_tsickle_Closure_declarations() {\n/** @type {?} */\nAjax.prototype.xhr;\n}\n\n","\nexport class XHRPromise {\npublic DEFAULT_CONTENT_TYPE = 'application/x-www-form-urlencoded; charset=UTF-8';\nprivate _xhr;\nprivate _unloadHandler: any;\nconstructor() {};\n/**\n * @param {?} options\n * @return {?}\n */\nsend(options): Promise<any> {\n        let /** @type {?} */ defaults;\n        if (options == null) {\n            options = {};\n        }\n        defaults = {\n            method: 'GET',\n            data: null,\n            headers: {},\n            async: true,\n            username: null,\n            password: null,\n            withCredentials: false\n        };\n        options = Object.assign({}, defaults, options);\n        return new Promise((function (_this: XHRPromise) {\n            return function (resolve, reject) {\n                let /** @type {?} */ e, /** @type {?} */ header, /** @type {?} */ ref, /** @type {?} */ value, /** @type {?} */ xhr;\n                if (!XMLHttpRequest) {\n                    _this._handleError('browser', reject, null, 'browser doesn\\'t support XMLHttpRequest');\n                    return;\n                }\n                if (typeof options.url !== 'string' || options.url.length === 0) {\n                    _this._handleError('url', reject, null, 'URL is a required parameter');\n                    return;\n                }\n                _this._xhr = xhr = new XMLHttpRequest;\n                xhr.onload = function () {\n                    let /** @type {?} */ responseText;\n                    _this._detachWindowUnload();\n                    try {\n                        responseText = _this._getResponseText();\n                    } catch ( /** @type {?} */_error) {\n                        _this._handleError('parse', reject, null, 'invalid JSON response');\n                        return;\n                    }\n                    return resolve({\n                        url: _this._getResponseUrl(),\n                        status: xhr.status,\n                        statusText: xhr.statusText,\n                        responseText: responseText,\n                        headers: _this._getHeaders(),\n                        xhr: xhr\n                    });\n                };\n                xhr.onerror = function () {\n                    return _this._handleError('error', reject);\n                };\n                xhr.ontimeout = function () {\n                    return _this._handleError('timeout', reject);\n                };\n                xhr.onabort = function () {\n                    return _this._handleError('abort', reject);\n                };\n                _this._attachWindowUnload();\n                xhr.open(options.method, options.url, options.async, options.username, options.password);\n                if (options.withCredentials) {\n                    xhr.withCredentials = true;\n                }\n                if ((options.data != null) && !options.headers['Content-Type']) {\n                    options.headers['Content-Type'] = _this.DEFAULT_CONTENT_TYPE;\n                }\n                ref = options.headers;\n                for (header in ref) {\n                    if (ref.hasOwnProperty(header)) {\n                        value = ref[header];\n                        xhr.setRequestHeader(header, value);\n                    }\n                }\n                try {\n                    return xhr.send(options.data);\n                } catch ( /** @type {?} */_error) {\n                    e = _error;\n                    return _this._handleError('send', reject, null, e.toString());\n                }\n            };\n        })(this));\n    };\n/**\n * @return {?}\n */\ngetXHR() {\n        return this._xhr;\n    };\n/**\n * @return {?}\n */\nprivate _attachWindowUnload() {\n        this._unloadHandler = this._handleWindowUnload.bind(this);\n        if (( /** @type {?} */((window as any))).attachEvent) {\n            return ( /** @type {?} */((window as any))).attachEvent('onunload', this._unloadHandler);\n        }\n    };\n/**\n * @return {?}\n */\nprivate _detachWindowUnload() {\n        if (( /** @type {?} */((window as any))).detachEvent) {\n            return ( /** @type {?} */((window as any))).detachEvent('onunload', this._unloadHandler);\n        }\n    };\n/**\n * @return {?}\n */\nprivate _getHeaders() {\n        return this._parseHeaders(this._xhr.getAllResponseHeaders());\n    };\n/**\n * @return {?}\n */\nprivate _getResponseText() {\n        let /** @type {?} */ responseText;\n        responseText = typeof this._xhr.responseText === 'string' ? this._xhr.responseText : '';\n        switch ((this._xhr.getResponseHeader('Content-Type') || '').split(';')[0]) {\n            case 'application/json':\n            case 'text/javascript':\n                responseText = JSON.parse(responseText + '');\n        }\n        return responseText;\n    };\n/**\n * @return {?}\n */\nprivate _getResponseUrl() {\n        if (this._xhr.responseURL != null) {\n            return this._xhr.responseURL;\n        }\n        if (/^X-Request-URL:/m.test(this._xhr.getAllResponseHeaders())) {\n            return this._xhr.getResponseHeader('X-Request-URL');\n        }\n        return '';\n    };\n/**\n * @param {?} reason\n * @param {?} reject\n * @param {?=} status\n * @param {?=} statusText\n * @return {?}\n */\nprivate _handleError(reason, reject, status?, statusText?) {\n        this._detachWindowUnload();\n        return reject({\n            reason: reason,\n            status: status || this._xhr.status,\n            statusText: statusText || this._xhr.statusText,\n            xhr: this._xhr\n        });\n    };\n/**\n * @return {?}\n */\nprivate _handleWindowUnload() {\n        return this._xhr.abort();\n    };\n/**\n * @param {?} str\n * @return {?}\n */\nprivate trim(str) {\n        return str.replace(/^\\s*|\\s*$/g, '');\n    }\n/**\n * @param {?} arg\n * @return {?}\n */\nprivate isArray(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    }\n/**\n * @param {?} list\n * @param {?} iterator\n * @return {?}\n */\nprivate forEach(list, iterator) {\n        if (toString.call(list) === '[object Array]') {\n            this.forEachArray(list, iterator, this)\n        } else if (typeof list === 'string') {\n            this.forEachString(list, iterator, this)\n        } else {\n            this.forEachObject(list, iterator, this)\n        }\n    }\n/**\n * @param {?} array\n * @param {?} iterator\n * @param {?} context\n * @return {?}\n */\nprivate forEachArray(array, iterator, context) {\n        for (let /** @type {?} */ i = 0, /** @type {?} */ len = array.length; i < len; i++) {\n            if (array.hasOwnProperty(i)) {\n                iterator.call(context, array[i], i, array)\n            }\n        }\n    }\n/**\n * @param {?} string\n * @param {?} iterator\n * @param {?} context\n * @return {?}\n */\nprivate forEachString(string, iterator, context) {\n        for (let /** @type {?} */ i = 0, /** @type {?} */ len = string.length; i < len; i++) {\n            // no such thing as a sparse string.\n            iterator.call(context, string.charAt(i), i, string)\n        }\n    }\n/**\n * @param {?} object\n * @param {?} iterator\n * @param {?} context\n * @return {?}\n */\nprivate forEachObject(object, iterator, context) {\n        for (const /** @type {?} */ k in object) {\n            if (object.hasOwnProperty(k)) {\n                iterator.call(context, object[k], k, object)\n            }\n        }\n    }\n/**\n * @param {?} headers\n * @return {?}\n */\nprivate _parseHeaders(headers) {\n        if (!headers) {\n            return {};\n        }\n\n        const /** @type {?} */ result = {};\n\n        this.forEach(\n            this.trim(headers).split('\\n')\n            , (row) => {\n                const /** @type {?} */ index = row.indexOf(':')\n                    , /** @type {?} */ key = this.trim(row.slice(0, index)).toLowerCase()\n                    , /** @type {?} */ value = this.trim(row.slice(index + 1));\n\n                if (typeof(result[key]) === 'undefined') {\n                    result[key] = value\n                } else if (this.isArray(result[key])) {\n                    result[key].push(value)\n                } else {\n                    result[key] = [result[key], value]\n                }\n            }\n        );\n\n        return result;\n    }\n\n\n}\n\nfunction XHRPromise_tsickle_Closure_declarations() {\n/** @type {?} */\nXHRPromise.prototype.DEFAULT_CONTENT_TYPE;\n/** @type {?} */\nXHRPromise.prototype._xhr;\n/** @type {?} */\nXHRPromise.prototype._unloadHandler;\n}\n\n","import {Base64} from './base64';\nexport class Xor {\nconstructor() {\n    };\n/**\n * @param {?} value\n * @param {?} key\n * @return {?}\n */\npublic static encrypt(value: string, key: string): string {\n\n        let /** @type {?} */ result = '';\n        for (let /** @type {?} */ i = 0; i < value.length; i++) {\n            result += String.fromCharCode(( /** @type {?} */((value[i].charCodeAt(0).toString(10) as any))) ^ Xor.keyCharAt(key, i));\n        }\n        return Base64.encode(result);\n    };\n/**\n * @param {?} value\n * @param {?} key\n * @return {?}\n */\npublic static decrypt(value: string, key: string): string {\n        let /** @type {?} */ result = '';\n        value = Base64.decode(value);\n        for (let /** @type {?} */ i = 0; i < value.length; i++) {\n            result += String.fromCharCode(( /** @type {?} */((value[i].charCodeAt(0).toString(10) as any))) ^ Xor.keyCharAt(key, i));\n        }\n        return result;\n    }\n/**\n * @param {?} key\n * @param {?} i\n * @return {?}\n */\npublic static keyCharAt(key, i) {\n        return key[Math.floor(i % key.length)].charCodeAt(0).toString(10);\n    }\n\n\n}\n","\n/**\n * localStorage class factory\n * Usage : var LocalStorage = miapp.LocalStorageFactory(window.localStorage); // to create a new class\n * Usage : var localStorageService = new LocalStorage(); // to create a new instance\n */\nexport class LocalStorage {\npublic version = '0.1';\nprivate storage;\n/**\n * @param {?} storageService\n * @param {?} storageKey\n */\nconstructor(storageService,\nprivate storageKey) {\n        this.storage = storageService || window.localStorage;\n        if (!this.storage) {\n            throw new Error('miapp.LocalStorageFactory needs a storageService!');\n        }\n        /* todo huge refacto\n                    if (!miapp.Xml) {\n                        throw new Error('miapp.Xml needs to be loaded before miapp.LocalStorage!');\n                    }\n                    if (!miapp.Json) {\n                        throw new Error('miapp.Json needs to be loaded before miapp.LocalStorage!');\n                    }\n                    if (!miapp.Xml.isXml || !miapp.Xml.xml2String || !miapp.Xml.string2Xml) {\n                        throw new Error('miapp.Xml with isXml(), xml2String() and string2Xml() needs to be loaded before miapp.LocalStorage!');\n                    }\n                    if (!miapp.Json.object2String || !miapp.Json.string2Object) {\n                        throw new Error('miapp.Json with object2String() and string2Object() needs to be loaded before miapp.LocalStorage!');\n                    }\n                    */\n    }\n/**\n * Sets a key's value.\n * \n *              a string an exception is raised.\n *              compatible (Numbers, Strings, Objects etc.).\n * @param {?} key\n * @param {?} value\n * @return {?} the stored value which is a container of user value.\n */\nset(key, value) {\n\n        key = this.storageKey + key;\n        this.checkKey(key);\n        // clone the object before saving to storage\n        const /** @type {?} */ t = typeof(value);\n        if (t === 'undefined') {\n            value = 'null';\n        } else if (value === null) {\n            value = 'null';\n        } else if (t === 'string') {\n            value = JSON.stringify({string: value})\n        } else if (t === 'number') {\n            value = JSON.stringify({number: value});\n        } else if (t === 'boolean') {\n            value = JSON.stringify({bool: value});\n        } else if (t === 'object') {\n            value = JSON.stringify({json: value});\n        } else {\n            // reject and do not insert\n            // if (typeof value == \"function\") for example\n            throw new TypeError('Value type ' + t + ' is invalid. It must be null, undefined, xml, string, number, boolean or object');\n        }\n        this.storage.setItem(key, value);\n        return value;\n    };\n/**\n * Looks up a key in cache\n * \n * @param {?} key\n * @param {?=} def\n * @return {?} the key value, default value or <null>\n */\nget(key, def?) {\n        key = this.storageKey + key;\n        this.checkKey(key);\n        const /** @type {?} */ item = this.storage.getItem(key);\n        if (item !== null) {\n            if (item === 'null') {\n                return null;\n            }\n            const /** @type {?} */ value = JSON.parse(item);\n            /* todo\n            var value = miapp.Json.string2Object(item);\n            if ('xml' in value) {\n                return miapp.Xml.string2Xml(value.xml);\n            } else  */\n            if ('string' in value) {\n                return value.string;\n            } else if ('number' in value) {\n                return value.number.valueOf();\n            } else if ('bool' in value) {\n                return value.bool.valueOf();\n            } else {\n                return value.json;\n            }\n        }\n        return !def ? null : def;\n    };\n/**\n * Deletes a key from cache.\n * \n * @param {?} key\n * @return {?} true if key existed or false if it didn't\n */\nremove(key) {\n        key = this.storageKey + key;\n        this.checkKey(key);\n        const /** @type {?} */ existed = (this.storage.getItem(key) !== null);\n        this.storage.removeItem(key);\n        return existed;\n    };\n/**\n * Deletes everything in cache.\n * \n * @return {?} true\n */\nclear() {\n        const /** @type {?} */ existed = (this.storage.length > 0);\n        this.storage.clear();\n        return existed;\n    };\n/**\n * How much space in bytes does the storage take?\n * \n * @return {?} Number\n */\nsize() {\n        return this.storage.length;\n    };\n/**\n * Call function f on the specified context for each element of the storage\n * from index 0 to index length-1.\n * WARNING : You should not modify the storage during the loop !!!\n * \n * @param {?} f\n * @param {?} context\n * @return {?} Number of items in storage\n */\nforeach(f, context) {\n        const /** @type {?} */ n = this.storage.length;\n        for (let /** @type {?} */ i = 0; i < n; i++) {\n            const /** @type {?} */ key = this.storage.key(i);\n            const /** @type {?} */ value = this.get(key);\n            if (context) {\n                // f is an instance method on instance context\n                f.call(context, value);\n            } else {\n                // f is a function or class method\n                f(value);\n            }\n        }\n        return n;\n    };\n/**\n * @param {?} key\n * @return {?}\n */\nprivate checkKey(key) {\n        if (!key || (typeof key !== 'string')) {\n            throw new TypeError('Key type must be string');\n        }\n        return true;\n    }\n}\n\nfunction LocalStorage_tsickle_Closure_declarations() {\n/** @type {?} */\nLocalStorage.prototype.version;\n/** @type {?} */\nLocalStorage.prototype.storage;\n/** @type {?} */\nLocalStorage.prototype.storageKey;\n}\n\n","\nexport class Base64 {\nconstructor() {\n    };\n/**\n * Decodes string from Base64 string\n * @param {?} input\n * @return {?}\n */\npublic static encode(input: string): string {\n\n        if (!input) { return null; }\n\n        return btoa(encodeURIComponent(input).replace(/%([0-9A-F]{2})/g,\n            function toSolidBytes(match, p1) {\n                return String.fromCharCode(parseInt('0x' + p1, 16));\n            }));\n\n    }\n/**\n * @param {?} input\n * @return {?}\n */\npublic static decode(input: string): string {\n\n        if (!input) { return null; }\n\n        return decodeURIComponent(atob(input).split('').map(function (c) {\n            return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n        }).join(''));\n\n    }\n}\n","// bumped version via gulp\nexport const /** @type {?} */ version = '2.0.19';\n"],"names":["tools.Base64","connection.Client","connection.Connection","session.Session","tools.LocalStorage","version.version","connection.Ajax","tools.Xor"],"mappings":"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"}
